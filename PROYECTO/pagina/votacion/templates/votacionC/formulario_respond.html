{% extends "votacionC/base.html" %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <a href="{% url 'votacion:formulario_list' %}" class="btn btn-link text-decoration-none ps-0">
      &larr; Regresar
    </a>
    
    <form method="post">
      {% csrf_token %}
      
      <div class="card shadow-sm">
        <div class="card-header">
          <h2 class="mb-0">{{ formulario.titulo }}</h2>
          <p class="mb-0">{{ formulario.descripcion|default:'' }}</p>
        </div>
        
        <div class="card-body">
          {% for question in questions %}
            <div class="card mb-3">
              <div class="card-body">
                <h5 class="card-title">{{ forloop.counter }}. {{ question.pregunta_texto }}</h5>
                
                {% if question.tipo_pregunta == 'CHOICE' %}
                  <fieldset class="mt-3">
                    {% for choice in question.opciones.all %}
                      <div class="form-check">
                        <input class="form-check-input" type="radio" 
                               name="pregunta_{{ question.pk }}" 
                               id="choice_{{ choice.pk }}" 
                               value="{{ choice.pk }}" required>
                        <label class="form-check-label" for="choice_{{ choice.pk }}">
                          {{ choice.choice_text }}
                        </label>
                      </div>
                    {% endfor %}
                  </fieldset>
                
                {% elif question.tipo_pregunta == 'TEXT' %}
                  <fieldset class="mt-3">
                    <textarea class="form-control" 
                              name="pregunta_{{ question.pk }}" 
                              rows="3" 
                              placeholder="Escribe tu respuesta..." required></textarea>
                  </fieldset>
                {% endif %}
                
              </div>
            </div>
          {% endfor %}
        </div>
        
        <div class="card-footer">
          <div class="d-grid">
            <button type="submit" class="btn btn-primary btn-lg">Enviar Respuestas</button>
          </div>
        </div>
      </div>
    </form>
    
  </div>
</div>
{% endblock %}